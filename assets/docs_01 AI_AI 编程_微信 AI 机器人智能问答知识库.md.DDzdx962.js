import{_ as n,c as s,o as a,a4 as p}from"./chunks/framework.4aTu-Nia.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"docs/01 AI/AI 编程/微信 AI 机器人智能问答知识库.md","filePath":"docs/01 AI/AI 编程/微信 AI 机器人智能问答知识库.md"}'),e={name:"docs/01 AI/AI 编程/微信 AI 机器人智能问答知识库.md"},t=p(`<p>上一篇文章，分享了如何搭建微信 AI 机器人，完成私聊、群聊对话等功能，今天这篇文章，主要分享下如何搭建微信 AI 机器人，完成基于知识库的智能问答功能。</p><p>在信息爆炸的时代，海量的信息确实给我们的生活带来了便利，但同时也带来了信息过载和准确性问题。因此，知识库的矫正作用变得尤为重要。知识库通过对信息进行筛选、整理和验证，确保提供的信息是准确、可靠和最新的。</p><p>AI 机器人与知识库的结合是通过对大模型进行微调，使其能够访问和使用知识库中的信息。当用户向 微信 AI 机器人提出问题时，机器人会使用 NLP 技术理解问题的含义，然后从知识库中检索相关信息，提供高效、准确的智能问答服务。</p><p>本文将介绍如何将一个普通的微信账号升级为基于知识库的智能问答机器人。</p><h2 id="一、效果展示" tabindex="-1">一、效果展示 <a class="header-anchor" href="#一、效果展示" aria-label="Permalink to &quot;一、效果展示&quot;">​</a></h2><p>1、不同群聊配置不同的 LinkAI 应用</p><p>机器人的角色是微信群配置的 LinkAI 应用的人设</p><p><img src="https://muchuang-img.oss-cn-beijing.aliyuncs.com/20240511235809.png" alt=""></p><p>2、知识库问答</p><p>机器人会参考微信群配置的 LinkAI 应用的知识库内容进行回答</p><p><img src="https://muchuang-img.oss-cn-beijing.aliyuncs.com/20240511235939.png" alt=""></p><h2 id="二、搭建-linkai-应用" tabindex="-1">二、搭建 LinkAI 应用 <a class="header-anchor" href="#二、搭建-linkai-应用" aria-label="Permalink to &quot;二、搭建 LinkAI 应用&quot;">​</a></h2><p>LinkAI 是一站式 AI 智能体搭建平台，可以理解为对 AI 大模型的封装，在 LinkAI 搭建的应用可以配置使用什么样的大模型，要完成知识库问答功能，需要用到 LinkAI，LinkAI 核心能力之一就是基于知识库内容进行问答</p><h3 id="_1、注册-linkai" tabindex="-1">1、注册 LinkAI <a class="header-anchor" href="#_1、注册-linkai" aria-label="Permalink to &quot;1、注册 LinkAI&quot;">​</a></h3><p>访问 <a href="https://link-ai.tech/home" target="_blank" rel="noreferrer">LinkAI 官网</a> ，使用微信或者手机号完成注册，新用户注册后可以获得 300 积分，每日签到可额外获得积分</p><h3 id="_2、创建知识库机器人" tabindex="-1">2、创建知识库机器人 <a class="header-anchor" href="#_2、创建知识库机器人" aria-label="Permalink to &quot;2、创建知识库机器人&quot;">​</a></h3><p>需要先创建知识库，然后再创建知识库应用，绑定之前创建的知识库</p><p>1）创建知识库</p><p><img src="https://muchuang-img.oss-cn-beijing.aliyuncs.com/20240511230729.png" alt="image.png"></p><p>可以选择两种方式上传知识库文件</p><ul><li><p>无结构化的文档</p></li><li><p>QA 格式的 CSV 模板</p></li></ul><p><img src="https://muchuang-img.oss-cn-beijing.aliyuncs.com/20240511231358.png" alt=""></p><p>2）创建知识库应用</p><p>创建时绑定知识库</p><p><img src="https://muchuang-img.oss-cn-beijing.aliyuncs.com/20240511232006.png" alt=""></p><p>知识库配置：</p><ul><li><p>相似度：知识库条目的相似度高于该阈值才会被检索</p></li><li><p>单次检索条数：单次问答从知识库中检索的最大段落数</p></li><li><p>未命中策略：当机器人找不到内容的情况下，是可以让模型自由发挥的回复用户，还是指定固定内容</p></li></ul><p><img src="https://muchuang-img.oss-cn-beijing.aliyuncs.com/20240511232710.png" alt=""></p><p>提示词：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>你是一个知识库助手，有一个包含各种信息的知识库。根据用户提出的问题，查找知识库中的信息，并用简洁、口语化的语言回答。如果知识库中找不到相关答案，请回复：“未找到相关问题”。以下是几个示例问题和回答：</span></span>
<span class="line"><span></span></span>
<span class="line"><span>用户：Python的基本数据类型有哪些？</span></span>
<span class="line"><span>助手：Python有几种基本数据类型：整数（int）、浮点数（float）、字符串（str）、布尔值（bool）等等。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>用户：地球有多大？</span></span>
<span class="line"><span>助手：地球的直径大约是12,742公里。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>用户：什么是量子计算？</span></span>
<span class="line"><span>助手：未找到相关问题。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>请根据用户提出的问题来生成相应的回答。</span></span></code></pre></div><h3 id="_3、获取-api-key-和应用-code" tabindex="-1">3、获取 API key 和应用 Code <a class="header-anchor" href="#_3、获取-api-key-和应用-code" aria-label="Permalink to &quot;3、获取 API key 和应用 Code&quot;">​</a></h3><p>1）获取 API key</p><p>LinkAPI 的API key（类似 gpt、xunfei 等），刚进来时没有 API Key，可以点击按钮创建</p><p><img src="https://muchuang-img.oss-cn-beijing.aliyuncs.com/20240511233127.png" alt=""></p><p>2）获取应用 Code</p><p>不同群聊可以配置不同类型的机器人，如果某个群聊没有出现在插件配置文件中时，将默认使用 LINKALAPP_CODE 对应的应用 Code</p><p><img src="https://muchuang-img.oss-cn-beijing.aliyuncs.com/20240511233207.png" alt=""></p><h2 id="三、服务搭建" tabindex="-1">三、服务搭建 <a class="header-anchor" href="#三、服务搭建" aria-label="Permalink to &quot;三、服务搭建&quot;">​</a></h2><p>搭建过程和上一篇完全一样，只需要修改几个配置参数然后再启动服务，就可以完成文章开头类似效果展示的对话</p><p>1）修改根目录 config.json</p><p>配置 use_linkai、linkai_api_key、linkai_app_code</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>&quot;use_linkai&quot;: true,</span></span>
<span class="line"><span>&quot;linkai_api_key&quot;: &quot;&quot;,  #API key</span></span>
<span class="line"><span>&quot;linkai_app_code&quot;: &quot;&quot;, #默认应用的code，当私聊时，或者在某个群聊没有出现在插件配置文件中时，将默认使用 LINKALAPP_CODE 对应的应用</span></span></code></pre></div><p>2）增加 plugins/linkai/config.json</p><p>将 <code>plugins/linkai</code> 目录下的 <code>config.json.template</code> 配置模板复制为最终生效的 <code>plugins/linkai/config.json</code></p><p>提供在不同群聊使用不同应用的功能，可以通过参数 <code>group_app_map</code> 配置微信群对应的 LinkAI 应用，AI 机器人会参考应用配置的知识库回答用户问题</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;group_app_map&quot;: {</span></span>
<span class="line"><span>      &quot;AI 机器人测试&quot;: &quot;JY9kReJl&quot;</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>3）完整配置文件</p><p>config.json 内容如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>  &quot;channel_type&quot;: &quot;wx&quot;,</span></span>
<span class="line"><span>  &quot;model&quot;: &quot;xunfei&quot;,</span></span>
<span class="line"><span>  &quot;open_ai_api_key&quot;: &quot;YOUR API KEY&quot;,</span></span>
<span class="line"><span>  &quot;claude_api_key&quot;: &quot;YOUR API KEY&quot;,</span></span>
<span class="line"><span>  &quot;text_to_image&quot;: &quot;dall-e-2&quot;,</span></span>
<span class="line"><span>  &quot;voice_to_text&quot;: &quot;openai&quot;,</span></span>
<span class="line"><span>  &quot;text_to_voice&quot;: &quot;openai&quot;,</span></span>
<span class="line"><span>  &quot;proxy&quot;: &quot;&quot;,</span></span>
<span class="line"><span>  &quot;hot_reload&quot;: false,</span></span>
<span class="line"><span>  &quot;single_chat_prefix&quot;: [</span></span>
<span class="line"><span>    &quot;机器人&quot;,</span></span>
<span class="line"><span>    &quot;@机器人&quot;,</span></span>
<span class="line"><span>    &quot;木川AI助手&quot;,</span></span>
<span class="line"><span>    &quot;@木川AI助手&quot;</span></span>
<span class="line"><span>  ],</span></span>
<span class="line"><span>  &quot;single_chat_reply_prefix&quot;: &quot;[AI助手] &quot;,</span></span>
<span class="line"><span>  &quot;group_chat_prefix&quot;: [</span></span>
<span class="line"><span>    &quot;@机器人&quot;</span></span>
<span class="line"><span>  ],</span></span>
<span class="line"><span>  &quot;group_name_white_list&quot;: [</span></span>
<span class="line"><span>    &quot;木川 2024 进阶陪伴群&quot;,</span></span>
<span class="line"><span>    &quot;木川AI编程陪伴群&quot;,</span></span>
<span class="line"><span>    &quot;木川 AI 学习交流群.&quot;,</span></span>
<span class="line"><span>    &quot;一人企业&quot;</span></span>
<span class="line"><span>  ],</span></span>
<span class="line"><span>  &quot;image_create_prefix&quot;: [</span></span>
<span class="line"><span>    &quot;画&quot;</span></span>
<span class="line"><span>  ],</span></span>
<span class="line"><span>  &quot;speech_recognition&quot;: true,</span></span>
<span class="line"><span>  &quot;group_speech_recognition&quot;: false,</span></span>
<span class="line"><span>  &quot;voice_reply_voice&quot;: false,</span></span>
<span class="line"><span>  &quot;conversation_max_tokens&quot;: 2500,</span></span>
<span class="line"><span>  &quot;expires_in_seconds&quot;: 3600,</span></span>
<span class="line"><span>  &quot;character_desc&quot;: &quot;你是基于大语言模型的AI智能助手，旨在回答并解决人们的任何问题，并且可以使用多种语言与人交流。&quot;,</span></span>
<span class="line"><span>  &quot;temperature&quot;: 0.7,</span></span>
<span class="line"><span>  &quot;subscribe_msg&quot;: &quot;感谢您的关注！\\n这里是AI智能助手，可以自由对话。\\n支持语音对话。\\n支持图片输入。\\n支持图片输出，画字开头的消息将按要求创作图片。\\n支持tool、角色扮演和文字冒险等丰富的插件。\\n输入{trigger_prefix}#help 查看详细指令。&quot;,</span></span>
<span class="line"><span>  &quot;group_welcome_msg&quot;: &quot;欢迎新成员！请务必阅读群公告并遵守我们的群规，同时鼓励积极交流互动。&quot;,</span></span>
<span class="line"><span>  &quot;xunfei_app_id&quot;: &quot;8b9adef9&quot;,</span></span>
<span class="line"><span>  &quot;xunfei_api_secret&quot;: &quot;NDc0MmJhZDI1NDVlYWI3MmZkODVjNDhl&quot;,</span></span>
<span class="line"><span>  &quot;xunfei_api_key&quot;: &quot;624d8be76b2bc6eafac4c34afe1f0f78&quot;,</span></span>
<span class="line"><span>  &quot;use_linkai&quot;: true,</span></span>
<span class="line"><span>  &quot;linkai_api_key&quot;: &quot;Link_xiPjfQD42qBfT27B6jBEbwNc36oIJgCPEbumz4RcCM&quot;,</span></span>
<span class="line"><span>  &quot;linkai_app_code&quot;: &quot;JY9kReJl&quot;,</span></span>
<span class="line"><span>  &quot;debug&quot;:true</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>plugins/linkai/config.json 内容如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>{</span></span>
<span class="line"><span>    &quot;group_app_map&quot;: {</span></span>
<span class="line"><span>      &quot;一人企业&quot;: &quot;JY9kRfdsf&quot;,</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    &quot;midjourney&quot;: {</span></span>
<span class="line"><span>        &quot;enabled&quot;: true,</span></span>
<span class="line"><span>        &quot;auto_translate&quot;: true,</span></span>
<span class="line"><span>        &quot;img_proxy&quot;: true,</span></span>
<span class="line"><span>        &quot;max_tasks&quot;: 3,</span></span>
<span class="line"><span>        &quot;max_tasks_per_user&quot;: 1,</span></span>
<span class="line"><span>        &quot;use_image_create_prefix&quot;: true</span></span>
<span class="line"><span>    },</span></span>
<span class="line"><span>    &quot;summary&quot;: {</span></span>
<span class="line"><span>        &quot;enabled&quot;: true,</span></span>
<span class="line"><span>        &quot;group_enabled&quot;: true,</span></span>
<span class="line"><span>        &quot;max_file_size&quot;: 5000,</span></span>
<span class="line"><span>        &quot;type&quot;: [&quot;FILE&quot;, &quot;SHARING&quot;]</span></span>
<span class="line"><span>    }</span></span>
<span class="line"><span>}</span></span></code></pre></div><h2 id="四、总结" tabindex="-1">四、总结 <a class="header-anchor" href="#四、总结" aria-label="Permalink to &quot;四、总结&quot;">​</a></h2><p>本文主要介绍了利用 LinkAI 平台搭建一个基于知识库的微信 AI 机器人，实现智能问答功能。文章分为三个部分：</p><p>1、<strong>效果展示</strong>：展示了如何为不同的群聊配置不同的机器人角色，并演示了机器人如何使用知识库进行问答。</p><p>2、<strong>搭建 LinkAI 应用</strong>：详细介绍了如何在 LinkAI 平台注册账号、创建知识库、创建知识库应用，并获取API key和应用Code。</p><p>3、<strong>服务搭建</strong>：说明了如何修改服务配置，包括在<code>config.json</code>中设置<code>use_linkai</code>、<code>linkai_api_key</code>、<code>linkai_app_code</code>，以及如何为不同群聊配置机器人。</p>`,56),o=[t];function i(l,u,c,q,r,_){return a(),s("div",null,o)}const h=n(e,[["render",i]]);export{g as __pageData,h as default};
